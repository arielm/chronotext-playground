
package org.chronotext.${PROJECT_NAME};

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity
{
  static
  {
    System.loadLibrary("${PROJECT_NAME}");
  }

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);

    BroadcastReceiver testHandler = new BroadcastReceiver()
    {
      @Override
      public void onReceive(Context context, Intent intent)
      {
        if (intent.hasExtra("args"))
        {
          Log.i("CHR", intent.getStringExtra("args"));
        }

        performTest();
        setResultCode(456);
      }
    };

    IntentFilter filter = new IntentFilter();
    filter.addAction("action.TEST");
    registerReceiver(testHandler, filter);
  }

  public static native void performTest();
}
